<div data-controller="calendar" class="mt-3" id="calendar-show">

  <a href="#" class="go-top">
    <%= icon 'arrow-up-circle' %>
  </a>

  <div class="mt-3 text-center">
    <div class="table-header">
      <h2>
        <%= t('navigation.calendar').upcase %>
      </h2>
    </div>

    <div class="input-group mt-3">
      <%= link_to '', data: { bs_toggle: "offcanvas", bs_target: "#offcanvasExample", aria_controls: "offcanvasExample" }, 
                      class: 'btn btn-primary btn-sm link-icon mx-2' do %>
        <%= inline_svg_tag("icons/bootstrap/highlighter", options = {class: 'me-1'}) %>
        <%= t('goal_markers') %>
      <% end %>

      <div class="filters">
        <%= render 'form' %>
      </div>
  </div>


  <%= month_calendar do |date| %>
    <%= date %>
    <% habits_for.each do |habit| %>
      <% completion_date = habit.completion_dates.find { |cd| cd.date == date.to_date } %>
      <% completed = !completion_date.nil? %>

      <%= tag.div habit.name, data: { complete: completed, goal_marker: habit.goal.color } %>
    <% end %>
  <% end %>
</div>

<%= render 'markers_canvas', goals: @goals %>

