<div id="goals-index">
  <div class="goals-block">
    <div class="categories-wrapper">
      <div class="new-category">
        <%= link_to t('new'), new_category_path, class: 'btn btn-primary btn-sm' %>
        <%= link_to t('manage'), categories_path, class: 'btn btn-primary btn-sm' %>
      </div>
      <div class="divider"></div>

      <div class="categories-title"><%= t('all_categories') %></div>
      <div class="categories-item all">
        <%= link_to t('all').capitalize, goals_path %>
      </div>

      <ul class="categories-list">
        <% current_user.categories.each do |category| %>
          <li class="categories-item">
            <%= link_to category.name, goals_path(filter: "#{category.id}") %>
            <span><%= category.goals.count %></span>
          </li>
          <div class="divider"></div>
        <% end %>
      </ul>
    </div>

    <div class="goals-wrapper">
      <div class="table-main">
        <div class="table-wrapper">
          <div class="table-header">
            <h2 class="text-center">
              <%= t('all_goals') %>
              (<%= goals_complete(@goals) %>
              <%= t('done').downcase %>)
            </h2>
          </div>

          <%= render 'layouts/search', path: goals_path %>

          <section class="table-body">
            <table>
              <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col"><%= sortable('name') %></th>
                <th scope="col" colspan="2"><%= sortable('complete') %></th>
              </tr>
              </thead>
              <tbody>
              <% if @goals.present? %>
                <% @goals.each_with_index do |goal, index| %>
                  <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= link_to goal.name.truncate(30), goal, style: "text-decoration: none" %></td>
                    <td>
                      <% if goal.complete? %>
                        <span class="badge rounded-pill text-bg-success"><%= t('done') %></span>
                      <% else %>
                        <span class="badge rounded-pill text-bg-light"><%= t('in_process') %></span>
                      <% end %>
                    </td>
                <% end %>
                </tr>
              <% end %>
              </tbody>
            </table>
          </section>
        </div>

        <div class="d-flex justify-content-around">
          <%= link_to t('add_goal'), new_goal_path, class: 'btn btn-primary' %>
        </div>
      </div>
    </div>
  </div>
</div>

